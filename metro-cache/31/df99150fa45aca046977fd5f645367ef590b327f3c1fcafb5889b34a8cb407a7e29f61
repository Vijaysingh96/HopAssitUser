{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  function defaultGetPageData(dataBlob, pageID) {\n    return dataBlob[pageID];\n  }\n\n  var ViewPagerDataSource = function () {\n    function ViewPagerDataSource(params) {\n      _classCallCheck(this, ViewPagerDataSource);\n\n      this._getPageData = params.getPageData || defaultGetPageData;\n      this._pageHasChanged = params.pageHasChanged;\n      this.pageIdentities = [];\n    }\n\n    _createClass(ViewPagerDataSource, [{\n      key: \"cloneWithPages\",\n      value: function cloneWithPages(dataBlob, pageIdentities) {\n        var newSource = new ViewPagerDataSource({\n          getPageData: this._getPageData,\n          pageHasChanged: this._pageHasChanged\n        });\n        newSource._dataBlob = dataBlob;\n\n        if (pageIdentities) {\n          newSource.pageIdentities = pageIdentities;\n        } else {\n          newSource.pageIdentities = Object.keys(dataBlob);\n        }\n\n        newSource._cachedPageCount = newSource.pageIdentities.length;\n\n        newSource._calculateDirtyPages(this._dataBlob, this.pageIdentities);\n\n        return newSource;\n      }\n    }, {\n      key: \"getPageCount\",\n      value: function getPageCount() {\n        return this._cachedPageCount;\n      }\n    }, {\n      key: \"pageShouldUpdate\",\n      value: function pageShouldUpdate(pageIndex) {\n        var needsUpdate = this._dirtyPages[pageIndex];\n        return needsUpdate;\n      }\n    }, {\n      key: \"getPageData\",\n      value: function getPageData(pageIndex) {\n        if (!this.getPageData) {\n          return null;\n        }\n\n        var pageID = this.pageIdentities[pageIndex];\n        return this._getPageData(this._dataBlob, pageID);\n      }\n    }, {\n      key: \"_calculateDirtyPages\",\n      value: function _calculateDirtyPages(prevDataBlob, prevPageIDs) {\n        var prevPagesHash = keyedDictionaryFromArray(prevPageIDs);\n        this._dirtyPages = [];\n        var dirty;\n\n        for (var sIndex = 0; sIndex < this.pageIdentities.length; sIndex++) {\n          var pageID = this.pageIdentities[sIndex];\n          dirty = !prevPagesHash[pageID];\n          var pageHasChanged = this._pageHasChanged;\n\n          if (!dirty && pageHasChanged) {\n            dirty = pageHasChanged(this._getPageData(prevDataBlob, pageID), this._getPageData(this._dataBlob, pageID));\n          }\n\n          this._dirtyPages.push(!!dirty);\n        }\n      }\n    }]);\n\n    return ViewPagerDataSource;\n  }();\n\n  function keyedDictionaryFromArray(arr) {\n    if (arr.length === 0) {\n      return {};\n    }\n\n    var result = {};\n\n    for (var ii = 0; ii < arr.length; ii++) {\n      var key = arr[ii];\n      result[key] = true;\n    }\n\n    return result;\n  }\n\n  module.exports = ViewPagerDataSource;\n});","lineCount":103,"map":[[2,0,1,0],[8,0,5,0],[8,11,5,9,"defaultGetPageData"],[8,29,5,0],[8,30,6,2,"dataBlob"],[8,38,5,0],[8,40,7,2,"pageID"],[8,46,5,0],[8,48,8,7],[9,0,9,2],[9,11,9,9,"dataBlob"],[9,19,9,17],[9,20,9,18,"pageID"],[9,26,9,17],[9,27,9,2],[10,0,10,1],[12,6,19,6,"ViewPagerDataSource"],[12,25],[13,0,21,2],[13,33,21,14,"params"],[13,39,21,2],[13,41,21,33],[14,0,21,33],[16,0,22,4],[16,11,22,9,"_getPageData"],[16,23,22,4],[16,26,22,24,"params"],[16,32,22,30],[16,33,22,31,"getPageData"],[16,44,22,24],[16,48,22,46,"defaultGetPageData"],[16,66,22,4],[17,0,23,4],[17,11,23,9,"_pageHasChanged"],[17,26,23,4],[17,29,23,27,"params"],[17,35,23,33],[17,36,23,34,"pageHasChanged"],[17,50,23,4],[18,0,25,4],[18,11,25,9,"pageIdentities"],[18,25,25,4],[18,28,25,26],[18,30,25,4],[19,0,26,3],[23,37,29,6,"dataBlob"],[23,45],[23,47,30,6,"pageIdentities"],[23,61],[23,63,31,25],[24,0,33,4],[24,12,33,8,"newSource"],[24,21,33,17],[24,24,33,20],[24,28,33,24,"ViewPagerDataSource"],[24,47,33,20],[24,48,33,44],[25,0,34,6,"getPageData"],[25,10,34,6,"getPageData"],[25,21,34,17],[25,23,34,19],[25,28,34,24,"_getPageData"],[25,40,33,44],[26,0,35,6,"pageHasChanged"],[26,10,35,6,"pageHasChanged"],[26,24,35,20],[26,26,35,22],[26,31,35,27,"_pageHasChanged"],[27,0,33,44],[27,9,33,20],[27,10,33,4],[28,0,38,4,"newSource"],[28,8,38,4,"newSource"],[28,17,38,13],[28,18,38,14,"_dataBlob"],[28,27,38,4],[28,30,38,26,"dataBlob"],[28,38,38,4],[30,0,40,4],[30,12,40,8,"pageIdentities"],[30,26,40,4],[30,28,40,24],[31,0,41,6,"newSource"],[31,10,41,6,"newSource"],[31,19,41,15],[31,20,41,16,"pageIdentities"],[31,34,41,6],[31,37,41,33,"pageIdentities"],[31,51,41,6],[32,0,42,5],[32,9,40,4],[32,15,42,11],[33,0,43,6,"newSource"],[33,10,43,6,"newSource"],[33,19,43,15],[33,20,43,16,"pageIdentities"],[33,34,43,6],[33,37,43,33,"Object"],[33,43,43,39],[33,44,43,40,"keys"],[33,48,43,33],[33,49,43,45,"dataBlob"],[33,57,43,33],[33,58,43,6],[34,0,44,5],[36,0,46,4,"newSource"],[36,8,46,4,"newSource"],[36,17,46,13],[36,18,46,14,"_cachedPageCount"],[36,34,46,4],[36,37,46,33,"newSource"],[36,46,46,42],[36,47,46,43,"pageIdentities"],[36,61,46,33],[36,62,46,58,"length"],[36,68,46,4],[38,0,47,4,"newSource"],[38,8,47,4,"newSource"],[38,17,47,13],[38,18,47,14,"_calculateDirtyPages"],[38,38,47,4],[38,39,48,6],[38,44,48,11,"_dataBlob"],[38,53,47,4],[38,55,49,6],[38,60,49,11,"pageIdentities"],[38,74,47,4],[40,0,51,4],[40,15,51,11,"newSource"],[40,24,51,4],[41,0,52,3],[44,37,54,25],[45,0,55,4],[45,15,55,11],[45,20,55,16,"_cachedPageCount"],[45,36,55,4],[46,0,56,3],[49,39,61,19,"pageIndex"],[49,48],[49,50,61,44],[50,0,62,4],[50,12,62,8,"needsUpdate"],[50,23,62,19],[50,26,62,22],[50,31,62,27,"_dirtyPages"],[50,42,62,22],[50,43,62,39,"pageIndex"],[50,52,62,22],[50,53,62,4],[51,0,65,4],[51,15,65,11,"needsUpdate"],[51,26,65,4],[52,0,66,3],[55,34,71,14,"pageIndex"],[55,43],[55,45,71,38],[56,0,72,4],[56,12,72,8],[56,13,72,9],[56,18,72,14,"getPageData"],[56,29,72,4],[56,31,72,27],[57,0,73,6],[57,17,73,13],[57,21,73,6],[58,0,74,5],[60,0,75,4],[60,12,75,8,"pageID"],[60,18,75,14],[60,21,75,17],[60,26,75,22,"pageIdentities"],[60,40,75,17],[60,41,75,37,"pageIndex"],[60,50,75,17],[60,51,75,4],[61,0,78,4],[61,15,78,11],[61,20,78,16,"_getPageData"],[61,32,78,11],[61,33,78,29],[61,38,78,34,"_dataBlob"],[61,47,78,11],[61,49,78,44,"pageID"],[61,55,78,11],[61,56,78,4],[62,0,79,3],[65,43,95,4,"prevDataBlob"],[65,55],[65,57,96,4,"prevPageIDs"],[65,68],[65,70,97,10],[66,0,99,4],[66,12,99,8,"prevPagesHash"],[66,25,99,21],[66,28,99,24,"keyedDictionaryFromArray"],[66,52,99,48],[66,53,99,49,"prevPageIDs"],[66,64,99,48],[66,65,99,4],[67,0,100,4],[67,13,100,9,"_dirtyPages"],[67,24,100,4],[67,27,100,23],[67,29,100,4],[68,0,102,4],[68,12,102,8,"dirty"],[68,17,102,4],[70,0,103,4],[70,13,103,9],[70,17,103,13,"sIndex"],[70,23,103,19],[70,26,103,22],[70,27,103,4],[70,29,103,25,"sIndex"],[70,35,103,31],[70,38,103,34],[70,43,103,39,"pageIdentities"],[70,57,103,34],[70,58,103,54,"length"],[70,64,103,4],[70,66,103,62,"sIndex"],[70,72,103,68],[70,74,103,4],[70,76,103,72],[71,0,104,6],[71,14,104,10,"pageID"],[71,20,104,16],[71,23,104,19],[71,28,104,24,"pageIdentities"],[71,42,104,19],[71,43,104,39,"sIndex"],[71,49,104,19],[71,50,104,6],[72,0,105,6,"dirty"],[72,10,105,6,"dirty"],[72,15,105,11],[72,18,105,14],[72,19,105,15,"prevPagesHash"],[72,32,105,28],[72,33,105,29,"pageID"],[72,39,105,28],[72,40,105,6],[73,0,106,6],[73,14,106,10,"pageHasChanged"],[73,28,106,24],[73,31,106,27],[73,36,106,32,"_pageHasChanged"],[73,51,106,6],[75,0,107,6],[75,14,107,10],[75,15,107,11,"dirty"],[75,20,107,10],[75,24,107,20,"pageHasChanged"],[75,38,107,6],[75,40,107,36],[76,0,108,8,"dirty"],[76,12,108,8,"dirty"],[76,17,108,13],[76,20,108,16,"pageHasChanged"],[76,34,108,30],[76,35,109,10],[76,40,109,15,"_getPageData"],[76,52,109,10],[76,53,109,28,"prevDataBlob"],[76,65,109,10],[76,67,109,42,"pageID"],[76,73,109,10],[76,74,108,30],[76,76,110,10],[76,81,110,15,"_getPageData"],[76,93,110,10],[76,94,110,28],[76,99,110,33,"_dataBlob"],[76,108,110,10],[76,110,110,44,"pageID"],[76,116,110,10],[76,117,108,30],[76,118,108,8],[77,0,112,7],[79,0,113,6],[79,15,113,11,"_dirtyPages"],[79,26,113,6],[79,27,113,23,"push"],[79,31,113,6],[79,32,113,28],[79,33,113,29],[79,34,113,30,"dirty"],[79,39,113,6],[80,0,114,5],[81,0,115,3],[87,0,119,0],[87,11,119,9,"keyedDictionaryFromArray"],[87,35,119,0],[87,36,119,34,"arr"],[87,39,119,0],[87,41,119,39],[88,0,120,2],[88,8,120,6,"arr"],[88,11,120,9],[88,12,120,10,"length"],[88,18,120,6],[88,23,120,21],[88,24,120,2],[88,26,120,24],[89,0,121,4],[89,13,121,11],[89,15,121,4],[90,0,122,3],[92,0,123,2],[92,8,123,6,"result"],[92,14,123,12],[92,17,123,15],[92,19,123,2],[94,0,124,2],[94,9,124,7],[94,13,124,11,"ii"],[94,15,124,13],[94,18,124,16],[94,19,124,2],[94,21,124,19,"ii"],[94,23,124,21],[94,26,124,24,"arr"],[94,29,124,27],[94,30,124,28,"length"],[94,36,124,2],[94,38,124,36,"ii"],[94,40,124,38],[94,42,124,2],[94,44,124,42],[95,0,125,4],[95,10,125,8,"key"],[95,13,125,11],[95,16,125,14,"arr"],[95,19,125,17],[95,20,125,18,"ii"],[95,22,125,17],[95,23,125,4],[96,0,127,4,"result"],[96,6,127,4,"result"],[96,12,127,10],[96,13,127,11,"key"],[96,16,127,10],[96,17,127,4],[96,20,127,18],[96,24,127,4],[97,0,128,3],[99,0,129,2],[99,11,129,9,"result"],[99,17,129,2],[100,0,130,1],[102,0,132,0,"module"],[102,2,132,0,"module"],[102,8,132,6],[102,9,132,7,"exports"],[102,16,132,0],[102,19,132,17,"ViewPagerDataSource"],[102,38,132,0]],"functionMap":{"names":["<global>","defaultGetPageData","ViewPagerDataSource","constructor","cloneWithPages","getPageCount","pageShouldUpdate","getPageData","_calculateDirtyPages","keyedDictionaryFromArray"],"mappings":"AAA;ACI;CDK;AES;ECE;GDK;EEE;GFwB;EGE;GHE;EIK;GJK;EKK;GLQ;EMe;GNqB;CFE;ASE;CTW"}},"type":"js/module"}]}